<div class="panel panel-default" id="SchedulerCtrl" ng-controller="SchedulerCtrl">
	<div class="panel-heading">
		Scheduler tasks
	</div>
	<div class="panel-body">
		<st-table data="schedulerTasks" uid="'schedulerTaskList'" persist-state="true">
			<st-actions>
			</st-actions>
			<st-columns>
				<st-column name="attributes.name">
					<header>Name</header>
					<second-header><inputdropdown action="search" initial-value="initialValue"></inputdropdown></second-header>
					<cell><span>{{row.attributes.name}}</span></cell>
				</st-column>
				<st-column name="planLink">
					<header>Plan link</header>
					<cell><plan-link plan-ref="row.executionsParameters.artefact" description="row.name"/></cell>
				</st-column>				
				<st-column>
					<header>Parameters</header>
					<second-header></second-header>
					<cell>
						<execution-parameters model="row.executionsParameters.customParameters" st-on-change="saveTask(row)" st-inline="true" />
					</cell>
				</st-column>
				<st-column name="cronExpression">
					<header>CRON Expression</header>
					<second-header><inputdropdown action="search" initial-value="initialValue"></inputdropdown></second-header>
					<cell><span>{{row.cronExpression}}</span></cell>
				</st-column>
				<st-column name="active">
					<header>Status</header>
					<second-header><inputdropdown action="search" initial-value="initialValue"></inputdropdown></second-header>
					<cell>
						<button type="button" class="btn btn-primary" ng-click="$parent.toggleTaskState(row.id, row.active)" ng-disabled="!authService.hasRight('task-write')" aria-pressed="false" autocomplete="off">{{row.active?'On':'Off'}}</button>
					</cell>
				</st-column>
				<st-column>
					<header>Actions</header>
					<cell>
						<div class="btn-group">				
							<button type="button" class="btn btn-default" ng-click="$parent.executeTask(row)" ng-disabled="!authService.hasRight('plan-execute')"  uib-tooltip="Execute">
	            				<span class="glyphicon glyphicon-play" aria-hidden="true"></span>
	            			</button>
							<button type="button" class="btn btn-default" ng-click="$parent.editTask(row.id)" ng-disabled="!authService.hasRight('task-write')" uib-tooltip="Edit">
	            				<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
	            			</button>
	            			<button type="button" class="btn btn-default" ng-click="$parent.askAndDeleteTask(row.id, true)" ng-disabled="!authService.hasRight('task-write')" uib-tooltip="Delete">
	            				<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
	            			</button>
	          			</div>
	          		</cell>
				</st-column>
			</st-columns>
		</st-table>	
	</div>
</div>