---
_class: "step.core.plans.Plan"
attributes:
  name: "Build"
agents:
  _class: "step.core.plans.agents.configuration.PlanAgentsPoolsAutoConfiguration"
  mode: "auto_detect"
root:
  _class: "TestCase"
  attributes:
    name: "Build"
  dynamicName:
    dynamic: false
    value: ""
    expression: ""
  useDynamicName: false
  children:
    - _class: "Check"
      attributes:
        name: "Check BRANCH is given"
      dynamicName:
        dynamic: false
        value: ""
        expression: ""
      useDynamicName: false
      children: []
      skipNode:
        dynamic: false
        value: false
      instrumentNode:
        dynamic: false
        value: false
      continueParentNodeExecutionOnError:
        dynamic: false
        value: false
      expression:
        dynamic: true
        expression: "binding.hasVariable(\"BRANCH\") && !BRANCH.isBlank()"
        expressionType: ""
      id: "644fbe4e38a61e07cc3a4df8"
    - _class: "Check"
      attributes:
        name: "Check PROJECT is given"
      dynamicName:
        dynamic: false
        value: ""
        expression: ""
      useDynamicName: false
      children: []
      skipNode:
        dynamic: false
        value: false
      instrumentNode:
        dynamic: false
        value: false
      continueParentNodeExecutionOnError:
        dynamic: false
        value: false
      expression:
        dynamic: true
        expression: "binding.hasVariable(\"PROJECT\") && !PROJECT.isBlank()"
        expressionType: ""
      id: "644fbe4e38a61e07cc3a4df8"
    - _class: "Check"
      attributes:
        name: "Check ENVIRONMENT is given"
      dynamicName:
        dynamic: false
        value: ""
        expression: ""
      useDynamicName: false
      children: []
      skipNode:
        dynamic: false
        value: false
      instrumentNode:
        dynamic: false
        value: false
      continueParentNodeExecutionOnError:
        dynamic: false
        value: false
      expression:
        dynamic: true
        expression: "binding.hasVariable(\"ENVIRONMENT\") && !ENVIRONMENT.isBlank()"
        expressionType: ""
      id: "644fbe4e38a61e07cc3a4df8"
    - _class: "If"
      attributes:
        name: "If ENVIRONMENT==\"PRODUCTION\""
      dynamicName:
        dynamic: false
        value: ""
        expression: ""
      useDynamicName: false
      children:
        - _class: "Check"
          attributes:
            name: "Check VERSION is given when releasing into PRODUCTION"
          dynamicName:
            dynamic: false
            value: ""
            expression: ""
          useDynamicName: false
          children: []
          skipNode:
            dynamic: false
            value: false
          instrumentNode:
            dynamic: false
            value: false
          continueParentNodeExecutionOnError:
            dynamic: false
            value: false
          expression:
            dynamic: true
            expression: "binding.hasVariable(\"VERSION\") && !VERSION.isBlank()"
            expressionType: ""
          id: "644fbe4e38a61e07cc3a4df8"
        - _class: "Check"
          attributes:
            name: "Check VERSION is properly formated"
          dynamicName:
            dynamic: false
            value: ""
            expression: ""
          useDynamicName: false
          children: []
          skipNode:
            dynamic: false
            value: false
          instrumentNode:
            dynamic: false
            value: false
          continueParentNodeExecutionOnError:
            dynamic: false
            value: false
          expression:
            dynamic: true
            expression: "VERSION ==~ /\\d+\\.\\d+\\.\\d+/"
            expressionType: ""
          id: "644fbe4e38a61e07cc3a4df8"
      skipNode:
        dynamic: false
        value: false
      instrumentNode:
        dynamic: false
        value: false
      continueParentNodeExecutionOnError:
        dynamic: false
        value: false
      condition:
        dynamic: true
        expression: "ENVIRONMENT==\"PRODUCTION\""
        expressionType: ""
      id: "644fbe4e38a61e07cc3a4df8"
    - _class: "Set"
      attributes:
        name: "Init SCALEUP"
      dynamicName:
        dynamic: false
        value: ""
        expression: ""
      useDynamicName: false
      children: []
      skipNode:
        dynamic: false
        value: false
      instrumentNode:
        dynamic: false
        value: false
      continueParentNodeExecutionOnError:
        dynamic: false
        value: false
      key:
        dynamic: false
        value: "SCALEUP"
      value:
        dynamic: false
        value: ""
      id: "644fbe4e38a61e07cc3a4df8"
    - _class: "If"
      attributes:
        name: "If OS==LINUX"
      dynamicName:
        dynamic: false
        value: ""
        expression: ""
      useDynamicName: false
      children:
        - _class: "CallPlan"
          attributes:
            name: "Scale Up Build Agents"
          dynamicName:
            dynamic: false
            value: ""
            expression: ""
          useDynamicName: false
          children: []
          skipNode:
            dynamic: false
            value: false
          instrumentNode:
            dynamic: false
            value: false
          continueParentNodeExecutionOnError:
            dynamic: false
            value: false
          planId: "6386268253799329484c57ef"
          selectionAttributes:
            dynamic: false
            value: "{}"
          input:
            dynamic: false
            value: "{}"
          id: "644fbe4e38a61e07cc3a4df8"
      skipNode:
        dynamic: false
        value: false
      instrumentNode:
        dynamic: false
        value: false
      continueParentNodeExecutionOnError:
        dynamic: false
        value: false
      condition:
        dynamic: true
        expression: "OS==\"LINUX\""
        expressionType: ""
      id: "644fbe4e38a61e07cc3a4df8"
    - _class: "Sequence"
      attributes:
        name: "Sequence"
      dynamicName:
        dynamic: false
        value: ""
        expression: ""
      useDynamicName: false
      children:
        - _class: "Session"
          attributes:
            name: "Session"
          dynamicName:
            dynamic: false
            value: ""
            expression: ""
          useDynamicName: false
          children:
            - _class: "Sequence"
              attributes:
                name: "Main Sequence"
              dynamicName:
                dynamic: false
                value: ""
                expression: ""
              useDynamicName: false
              children:
                - _class: "BeforeSequence"
                  attributes:
                    name: "BeforeSequence - Init variables"
                  dynamicName:
                    dynamic: false
                    value: ""
                    expression: ""
                  useDynamicName: false
                  children:
                    - _class: "Set"
                      attributes:
                        name: "Init STATUS - FAILED"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children: []
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      key:
                        dynamic: false
                        value: "STATUS"
                      value:
                        dynamic: false
                        value: "FAILED"
                      id: "644fbe4e38a61e07cc3a4df8"
                    - _class: "Set"
                      attributes:
                        name: "Init FOLDER"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children: []
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      key:
                        dynamic: false
                        value: "FOLDER"
                      value:
                        dynamic: true
                        expression: ""
                        expressionType: ""
                      id: "644fbe4e38a61e07cc3a4df8"
                    - _class: "Set"
                      attributes:
                        name: "Init FTP_FILES"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children: []
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: true
                      key:
                        dynamic: false
                        value: "FTP_FILES"
                      value:
                        dynamic: false
                        value: ""
                      id: "644fbe4e38a61e07cc3a4df8"
                    - _class: "Set"
                      attributes:
                        name: "Init TESTS"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children: []
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      key:
                        dynamic: false
                        value: "TESTS"
                      value:
                        dynamic: false
                        value: ""
                      id: "644fbe4e38a61e07cc3a4df8"
                    - _class: "Set"
                      attributes:
                        name: "Init DEPLOYED_INSTANCES"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children: []
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: true
                      key:
                        dynamic: false
                        value: "DEPLOYED_INSTANCES"
                      value:
                        dynamic: false
                        value: ""
                      id: "644fbe4e38a61e07cc3a4df8"
                    - _class: "Set"
                      attributes:
                        name: "Set BRANCH_EXIST if not given"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children: []
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      key:
                        dynamic: false
                        value: "BRANCH_EXIST"
                      value:
                        dynamic: true
                        expression: "!binding.hasVariable(\"BRANCH_EXIST\")? true : Boolean.parseBoolean(\"\
                ${BRANCH_EXIST}\")"
                        expressionType: ""
                      id: "644fbe4e38a61e07cc3a4df8"
                    - _class: "Set"
                      attributes:
                        name: "Set OS if not given"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children: []
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      key:
                        dynamic: false
                        value: "OS"
                      value:
                        dynamic: true
                        expression: "!binding.hasVariable(\"OS\")? \"LINUX\" : OS"
                        expressionType: ""
                      id: "644fbe4e38a61e07cc3a4df8"
                    - _class: "Set"
                      attributes:
                        name: "Set SHOULD_PROPAGATE if not given"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children: []
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      key:
                        dynamic: false
                        value: "SHOULD_PROPAGATE"
                      value:
                        dynamic: true
                        expression: "!binding.hasVariable(\"SHOULD_PROPAGATE\")? true : Boolean.parseBoolean(\"\
                ${SHOULD_PROPAGATE}\")"
                        expressionType: ""
                      id: "644fbe4e38a61e07cc3a4df8"
                    - _class: "Set"
                      attributes:
                        name: "Set EMAIL if not given"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children: []
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      key:
                        dynamic: false
                        value: "EMAIL"
                      value:
                        dynamic: true
                        expression: "!binding.hasVariable(\"EMAIL\")? DEFAULT_EMAIL : EMAIL"
                        expressionType: ""
                      id: "644fbe4e38a61e07cc3a4df8"
                    - _class: "Set"
                      attributes:
                        name: "Set AUTHOR if not given"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children: []
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      key:
                        dynamic: false
                        value: "AUTHOR"
                      value:
                        dynamic: true
                        expression: "!binding.hasVariable(\"AUTHOR\")? \"Dev team\" : AUTHOR"
                        expressionType: ""
                      id: "644fbe4e38a61e07cc3a4df8"
                    - _class: "Set"
                      attributes:
                        name: "Set SEND_EMAIL if not given"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children: []
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      key:
                        dynamic: false
                        value: "SEND_EMAIL"
                      value:
                        dynamic: true
                        expression: "!binding.hasVariable(\"SEND_EMAIL\")?true:Boolean.parseBoolean(\"\
                ${SEND_EMAIL}\")"
                        expressionType: ""
                      id: "644fbe4e38a61e07cc3a4df8"
                    - _class: "Set"
                      attributes:
                        name: "Set VERSION if not given"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children: []
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      key:
                        dynamic: false
                        value: "VERSION"
                      value:
                        dynamic: true
                        expression: "(!binding.hasVariable(\"VERSION\") || VERSION.isBlank())?\
                \ \"${new Date().format(\"YYYY.M.d\")}-${context.getExecutionId()}\"\
                \ : VERSION"
                        expressionType: ""
                      id: "644fbe4e38a61e07cc3a4df8"
                  skipNode:
                    dynamic: false
                    value: false
                  instrumentNode:
                    dynamic: false
                    value: false
                  continueParentNodeExecutionOnError:
                    dynamic: false
                    value: false
                  continueOnError:
                    dynamic: false
                    value: false
                  pacing:
                    dynamic: false
                  id: "644fbe4e38a61e07cc3a4df8"
                - _class: "Echo"
                  attributes:
                    name: "Echo info"
                  dynamicName:
                    dynamic: false
                    value: ""
                    expression: ""
                  useDynamicName: false
                  children: []
                  skipNode:
                    dynamic: false
                    value: false
                  instrumentNode:
                    dynamic: false
                    value: false
                  continueParentNodeExecutionOnError:
                    dynamic: false
                    value: false
                  text:
                    dynamic: true
                    expression: "\"Building ${PROJECT}, for branch ${BRANCH} version ${VERSION}\
              \ in environment ${ENVIRONMENT}\""
                    expressionType: ""
                  id: "644fbe4e38a61e07cc3a4df8"
                - _class: "CallPlan"
                  attributes:
                    name: "Create unique folder"
                  dynamicName:
                    dynamic: false
                    value: ""
                    expression: ""
                  useDynamicName: false
                  children: []
                  skipNode:
                    dynamic: false
                    value: false
                  instrumentNode:
                    dynamic: false
                    value: false
                  continueParentNodeExecutionOnError:
                    dynamic: false
                    value: false
                  planId: "618aa49f34603040f758fd12"
                  selectionAttributes:
                    dynamic: false
                    value: "{}"
                  input:
                    dynamic: false
                    value: "{}"
                  id: "644fbe4e38a61e07cc3a4df8"
                - _class: "CallPlan"
                  attributes:
                    name: "Checkout git"
                  dynamicName:
                    dynamic: false
                    value: ""
                    expression: ""
                  useDynamicName: false
                  children: []
                  skipNode:
                    dynamic: false
                    value: false
                  instrumentNode:
                    dynamic: false
                    value: false
                  continueParentNodeExecutionOnError:
                    dynamic: false
                    value: false
                  planId: "63fc7ffd32ed452ab30e0116"
                  selectionAttributes:
                    dynamic: false
                    value: "{}"
                  input:
                    dynamic: false
                    value: "{}"
                  id: "644fbe4e38a61e07cc3a4df8"
                - _class: "Set"
                  attributes:
                    name: "Init JSON"
                  dynamicName:
                    dynamic: false
                    value: ""
                    expression: ""
                  useDynamicName: false
                  children: []
                  skipNode:
                    dynamic: false
                    value: false
                  instrumentNode:
                    dynamic: false
                    value: false
                  continueParentNodeExecutionOnError:
                    dynamic: false
                    value: false
                  key:
                    dynamic: false
                    value: "JSON"
                  value:
                    dynamic: false
                    value: ""
                  id: "644fbe4e38a61e07cc3a4df8"
                - _class: "CallPlan"
                  attributes:
                    name: "Read JSON"
                  dynamicName:
                    dynamic: false
                    value: ""
                    expression: ""
                  useDynamicName: false
                  children: []
                  skipNode:
                    dynamic: false
                    value: false
                  instrumentNode:
                    dynamic: false
                    value: false
                  continueParentNodeExecutionOnError:
                    dynamic: false
                    value: false
                  planId: "618aa49f34603040f758fd0b"
                  selectionAttributes:
                    dynamic: false
                    value: "{}"
                  input:
                    dynamic: false
                    value: "{}"
                  id: "644fbe4e38a61e07cc3a4df8"
                - _class: "CallPlan"
                  attributes:
                    name: "Run action"
                  dynamicName:
                    dynamic: false
                    value: ""
                    expression: ""
                  useDynamicName: false
                  children: []
                  skipNode:
                    dynamic: false
                    value: false
                  instrumentNode:
                    dynamic: false
                    value: false
                  continueParentNodeExecutionOnError:
                    dynamic: false
                    value: false
                  planId: "618aa49f34603040f758fd15"
                  selectionAttributes:
                    dynamic: false
                    value: "{}"
                  input:
                    dynamic: false
                    value: "{}"
                  id: "644fbe4e38a61e07cc3a4df8"
                - _class: "CallPlan"
                  attributes:
                    name: "Create release"
                  dynamicName:
                    dynamic: false
                    value: ""
                    expression: ""
                  useDynamicName: false
                  children: []
                  skipNode:
                    dynamic: false
                    value: false
                  instrumentNode:
                    dynamic: false
                    value: false
                  continueParentNodeExecutionOnError:
                    dynamic: false
                    value: false
                  planId: "64145b48d91d580809da608f"
                  selectionAttributes:
                    dynamic: false
                    value: "{}"
                  input:
                    dynamic: false
                    value: "{}"
                  id: "644fbe4e38a61e07cc3a4df8"
                - _class: "RetryIfFails"
                  attributes:
                    name: "RetryIfFails"
                  dynamicName:
                    dynamic: false
                    value: ""
                    expression: ""
                  useDynamicName: false
                  children:
                    - _class: "CallPlan"
                      attributes:
                        name: "Set latest version"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children: []
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      planId: "63ff232032ed452ab35619aa"
                      selectionAttributes:
                        dynamic: false
                        value: "{}"
                      input:
                        dynamic: false
                        value: "{}"
                      id: "644fbe4e38a61e07cc3a4df8"
                  skipNode:
                    dynamic: false
                    value: false
                  instrumentNode:
                    dynamic: false
                    value: false
                  continueParentNodeExecutionOnError:
                    dynamic: false
                    value: false
                  maxRetries:
                    dynamic: false
                    value: 3
                  gracePeriod:
                    dynamic: false
                    value: 1000
                  timeout:
                    dynamic: false
                    value: 0
                  releaseTokens:
                    dynamic: false
                    value: false
                  reportLastTryOnly:
                    dynamic: false
                    value: true
                  id: "644fbe4e38a61e07cc3a4df8"
                - _class: "Set"
                  attributes:
                    name: "Set STATUS at PASSED"
                  dynamicName:
                    dynamic: false
                    value: ""
                    expression: ""
                  useDynamicName: false
                  children: []
                  skipNode:
                    dynamic: false
                    value: false
                  instrumentNode:
                    dynamic: false
                    value: false
                  continueParentNodeExecutionOnError:
                    dynamic: false
                    value: false
                  key:
                    dynamic: false
                    value: "STATUS"
                  value:
                    dynamic: false
                    value: "PASSED"
                  id: "644fbe4e38a61e07cc3a4df8"
                - _class: "AfterSequence"
                  attributes:
                    name: "AfterSequence - Set result"
                  dynamicName:
                    dynamic: false
                    value: ""
                    expression: ""
                  useDynamicName: false
                  children:
                    - _class: "CallPlan"
                      attributes:
                        name: "Set build result"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children: []
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      planId: "64145bc4d91d580809daa2f1"
                      selectionAttributes:
                        dynamic: false
                        value: "{}"
                      input:
                        dynamic: false
                        value: "{}"
                      id: "644fbe4e38a61e07cc3a4df8"
                    - _class: "If"
                      attributes:
                        name: "If ENVIRONMENT==\"PRODUCTION\" && STATUS==\"PASSED\""
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children:
                        - _class: "Set"
                          attributes:
                            name: "Set EXEC_ID"
                          dynamicName:
                            dynamic: false
                            value: ""
                            expression: ""
                          useDynamicName: false
                          children: []
                          skipNode:
                            dynamic: false
                            value: false
                          instrumentNode:
                            dynamic: false
                            value: false
                          continueParentNodeExecutionOnError:
                            dynamic: false
                            value: false
                          key:
                            dynamic: false
                            value: "EXEC_ID"
                          value:
                            dynamic: true
                            expression: "context.getExecutionId()"
                            expressionType: ""
                          id: "644fbe4e38a61e07cc3a4df8"
                        - _class: "CallKeyword"
                          attributes:
                            name: "Set as \"Retain this execution\""
                          dynamicName:
                            dynamic: false
                            value: ""
                            expression: ""
                          useDynamicName: false
                          children: []
                          skipNode:
                            dynamic: false
                            value: false
                          instrumentNode:
                            dynamic: false
                            value: false
                          continueParentNodeExecutionOnError:
                            dynamic: false
                            value: false
                          remote:
                            dynamic: false
                            value: true
                          token:
                            dynamic: false
                            value: "{}"
                          function:
                            dynamic: false
                            value: "{\"name\":{\"dynamic\":false,\"value\":\"HttpRequest\",\"\
                  expression\":null,\"expressionType\":null}}"
                          argument:
                            dynamic: false
                            value: "{\"URL\":{\"dynamic\":true,\"expression\":\"\\\"${K8S_BUILD_INSTANCE_URL}/rest/housekeeping/execution/${EXEC_ID}/protection\\\
                  \"\"},\"Method\":{\"dynamic\":false,\"value\":\"POST\"},\"Header_content-type\"\
                  :{\"dynamic\":false,\"value\":\"application/json\"},\"Data\":{\"\
                  dynamic\":false,\"value\":\"true\"}}"
                          resultMap:
                            dynamic: false
                          id: "644fbe4e38a61e07cc3a4df8"
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      condition:
                        dynamic: true
                        expression: "ENVIRONMENT==\"PRODUCTION\" && STATUS==\"PASSED\""
                        expressionType: ""
                      id: "644fbe4e38a61e07cc3a4df8"
                  skipNode:
                    dynamic: false
                    value: false
                  instrumentNode:
                    dynamic: false
                    value: false
                  continueParentNodeExecutionOnError:
                    dynamic: false
                    value: false
                  continueOnError:
                    dynamic: false
                    value: false
                  pacing:
                    dynamic: false
                  id: "644fbe4e38a61e07cc3a4df8"
                - _class: "AfterSequence"
                  attributes:
                    name: "AfterSequence - Send email"
                  dynamicName:
                    dynamic: false
                    value: ""
                    expression: ""
                  useDynamicName: false
                  children:
                    - _class: "If"
                      attributes:
                        name: "If SEND_EMAIL"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children:
                        - _class: "RetryIfFails"
                          attributes:
                            name: "RetryIfFails"
                          dynamicName:
                            dynamic: false
                            value: ""
                            expression: ""
                          useDynamicName: false
                          children:
                            - _class: "CallPlan"
                              attributes:
                                name: "Send Email"
                              dynamicName:
                                dynamic: false
                                value: ""
                                expression: ""
                              useDynamicName: false
                              children: []
                              skipNode:
                                dynamic: false
                                value: false
                              instrumentNode:
                                dynamic: false
                                value: false
                              continueParentNodeExecutionOnError:
                                dynamic: false
                                value: false
                              planId: "6229efeaf270a8319dfbee2e"
                              selectionAttributes:
                                dynamic: false
                                value: "{}"
                              input:
                                dynamic: false
                                value: "{}"
                              id: "644fbe4e38a61e07cc3a4df8"
                          skipNode:
                            dynamic: false
                            value: false
                          instrumentNode:
                            dynamic: false
                            value: false
                          continueParentNodeExecutionOnError:
                            dynamic: false
                            value: false
                          maxRetries:
                            dynamic: false
                            value: 3
                          gracePeriod:
                            dynamic: false
                            value: 1000
                          timeout:
                            dynamic: false
                            value: 0
                          releaseTokens:
                            dynamic: false
                            value: false
                          reportLastTryOnly:
                            dynamic: false
                            value: false
                          id: "644fbe4e38a61e07cc3a4df8"
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      condition:
                        dynamic: true
                        expression: "SEND_EMAIL"
                        expressionType: ""
                      id: "644fbe4e38a61e07cc3a4df8"
                  skipNode:
                    dynamic: false
                    value: false
                  instrumentNode:
                    dynamic: false
                    value: false
                  continueParentNodeExecutionOnError:
                    dynamic: false
                    value: false
                  continueOnError:
                    dynamic: false
                    value: true
                  pacing:
                    dynamic: false
                  id: "644fbe4e38a61e07cc3a4df8"
                - _class: "AfterSequence"
                  attributes:
                    name: "AfterSequence - Clean folder"
                  dynamicName:
                    dynamic: false
                    value: ""
                    expression: ""
                  useDynamicName: false
                  children:
                    - _class: "CallKeyword"
                      attributes:
                        name: "Rmdir ${FOLDER}"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children: []
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      remote:
                        dynamic: false
                        value: true
                      token:
                        dynamic: false
                        value: "{}"
                      function:
                        dynamic: false
                        value: "{\"name\":{\"dynamic\":false,\"value\":\"Rmdir\",\"expression\"\
                :null,\"expressionType\":null}}"
                      argument:
                        dynamic: false
                        value: "{\"Folder\":{\"dynamic\":true,\"expression\":\"FOLDER\"}}"
                      resultMap:
                        dynamic: false
                      id: "644fbe4e38a61e07cc3a4df8"
                  skipNode:
                    dynamic: false
                    value: false
                  instrumentNode:
                    dynamic: false
                    value: false
                  continueParentNodeExecutionOnError:
                    dynamic: false
                    value: false
                  continueOnError:
                    dynamic: false
                    value: false
                  pacing:
                    dynamic: false
                  id: "644fbe4e38a61e07cc3a4df8"
                - _class: "AfterSequence"
                  attributes:
                    name: "AfterSequence - Propagate build"
                  dynamicName:
                    dynamic: false
                    value: ""
                    expression: ""
                  useDynamicName: false
                  children:
                    - _class: "If"
                      attributes:
                        name: "If SHOULD_PROPAGATE && PASSED"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children:
                        - _class: "CallPlan"
                          attributes:
                            name: "Propagate build - scale down the agent if needed"
                          dynamicName:
                            dynamic: false
                            value: ""
                            expression: ""
                          useDynamicName: false
                          children: []
                          skipNode:
                            dynamic: false
                            value: false
                          instrumentNode:
                            dynamic: false
                            value: false
                          continueParentNodeExecutionOnError:
                            dynamic: false
                            value: false
                          planId: "63ff47ed32ed452ab35c23d0"
                          selectionAttributes:
                            dynamic: false
                            value: "{}"
                          input:
                            dynamic: false
                            value: "{}"
                          id: "644fbe4e38a61e07cc3a4df8"
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      condition:
                        dynamic: true
                        expression: "STATUS.equals(\"PASSED\") &&  SHOULD_PROPAGATE"
                        expressionType: ""
                      id: "644fbe4e38a61e07cc3a4df8"
                  skipNode:
                    dynamic: false
                    value: false
                  instrumentNode:
                    dynamic: false
                    value: false
                  continueParentNodeExecutionOnError:
                    dynamic: false
                    value: false
                  continueOnError:
                    dynamic: false
                    value: false
                  pacing:
                    dynamic: false
                  id: "644fbe4e38a61e07cc3a4df8"
                - _class: "AfterSequence"
                  attributes:
                    name: "AfterSequence - Scale down agent if needed"
                  dynamicName:
                    dynamic: false
                    value: ""
                    expression: ""
                  useDynamicName: false
                  children:
                    - _class: "If"
                      attributes:
                        name: "If STATUS is not \"PASSED\" or SHOULD_PROPAGATE is false"
                      dynamicName:
                        dynamic: false
                        value: ""
                        expression: ""
                      useDynamicName: false
                      children:
                        - _class: "CallPlan"
                          attributes:
                            name: "Scale Down Build Agents - After Execution"
                          dynamicName:
                            dynamic: false
                            value: ""
                            expression: ""
                          useDynamicName: false
                          children: []
                          skipNode:
                            dynamic: false
                            value: false
                          instrumentNode:
                            dynamic: false
                            value: false
                          continueParentNodeExecutionOnError:
                            dynamic: false
                            value: false
                          planId: "6482daa9cdd45e7199acdcac"
                          selectionAttributes:
                            dynamic: false
                            value: "{}"
                          input:
                            dynamic: false
                            value: "{}"
                          id: "644fbe4e38a61e07cc3a4df8"
                      skipNode:
                        dynamic: false
                        value: false
                      instrumentNode:
                        dynamic: false
                        value: false
                      continueParentNodeExecutionOnError:
                        dynamic: false
                        value: false
                      condition:
                        dynamic: true
                        expression: "!STATUS.equals(\"PASSED\") || !SHOULD_PROPAGATE"
                        expressionType: ""
                      id: "644fbe4e38a61e07cc3a4df8"
                  skipNode:
                    dynamic: false
                    value: false
                  instrumentNode:
                    dynamic: false
                    value: false
                  continueParentNodeExecutionOnError:
                    dynamic: false
                    value: false
                  continueOnError:
                    dynamic: false
                    value: false
                  pacing:
                    dynamic: false
                  id: "644fbe4e38a61e07cc3a4df8"
              skipNode:
                dynamic: false
                value: false
              instrumentNode:
                dynamic: false
                value: false
              continueParentNodeExecutionOnError:
                dynamic: false
                value: false
              continueOnError:
                dynamic: false
                value: false
              pacing:
                dynamic: false
              id: "644fbe4e38a61e07cc3a4df8"
          skipNode:
            dynamic: false
            value: false
          instrumentNode:
            dynamic: false
            value: false
          continueParentNodeExecutionOnError:
            dynamic: false
            value: false
          remote:
            dynamic: false
            value: true
          token:
            dynamic: false
            value: "{\"OS\":{\"dynamic\":true,\"expression\":\"OS\"},\"type\":{\"dynamic\"\
          :false,\"value\":\"build\"}}"
          dockerImage:
            dynamic: false
          containerUser:
            dynamic: false
          containerCommand:
            dynamic: false
          id: "644fbe4e38a61e07cc3a4df8"
      skipNode:
        dynamic: false
        value: false
      instrumentNode:
        dynamic: false
        value: false
      continueParentNodeExecutionOnError:
        dynamic: false
        value: false
      continueOnError:
        dynamic: false
        value: true
      pacing:
        dynamic: false
      id: "644fbe4e38a61e07cc3a4df8"
  skipNode:
    dynamic: false
    value: false
  instrumentNode:
    dynamic: false
    value: false
  continueParentNodeExecutionOnError:
    dynamic: false
    value: false
  id: "644fbe4e38a61e07cc3a4df8"
visible: true
id: "644fbe4e38a61e07cc3a4df8"
